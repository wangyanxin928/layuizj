<!DOCTYPE html>
<html>
<head lang="en">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <!--layui框架css-->
    <link rel="stylesheet" href="../layui/css/layui.css"  media="all">
    <!--图片上传样式-->
    <link rel="stylesheet" type="text/css" href="../js/ossupload/uploadstyle.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" type="text/css" href="../css/common.css">
    <title></title>
</head>
<body>
<ul class="layui-nav">
    <li class="layui-nav-item "><a href="input.html">文本框</a></li>
    <li class="layui-nav-item"><a href="select.html">单选多选</a></li>
    <li class="layui-nav-item layui-this"><a href="fileimg.html">文件上传</a></li>
</ul>
<form class="layui-form">
    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 50px;">
        <legend>头像上传</legend>
    </fieldset>
    <div class="site-demo-upload">
        <img id="ossfile" src="http://layer.layui.com/images/tong.jpg">
        <div class="site-demo-upbar" id="container11">
            <div class="layui-box layui-upload-button" id="selectfiles1">
                <span class="layui-upload-icon"><i class="layui-icon"></i>选择图片</span>
            </div>
            <div class="layui-box layui-upload-button" id="postfiles1" style="display: none;">
                <span class="layui-upload-icon">确认上传</span>
            </div>
        </div>
    </div>
</form>
<form class="layui-form1" >
    <fieldset class="layui-elem-field layui-field-title" style="margin-top: 50px;">
        <legend>文件上传</legend>
    </fieldset>
    <div>
        <h3>您选择的文件列表</h3>
        <div id="ossfile2">
        </div>
        <div class="site-demo-upbar" id="container12">
            <div class="layui-box layui-upload-button" id="selectfiles2">
                <span class="layui-upload-icon"><i class="layui-icon"></i>选择文件</span>
            </div>
            <div class="layui-box layui-upload-button" id="postfiles2" >
                <span class="layui-upload-icon">确认上传</span>
            </div>
        </div>
    </div>
</form>
<div class="layui-progress" lay-showpercent="true" style="display: none;">
    <div class="layui-progress-bar" lay-percent="20%"></div>
</div>

<script src="../layui/layui.js" charset="utf-8"></script>
<!--文件上传要引用的三个js-->
<script type="text/javascript" src="../js/ossupload/base64.js"></script>
<script type="text/javascript" src="../js/ossupload/plupload-2.1.2/js/plupload.full.min.js"></script>
<script type="text/javascript" src="../js/ossupload/upload1.js"></script>
<script type="text/javascript">
    //config的设置是全局的
    layui.config({
        base: '../js/ossupload/' //假设这是test.js所在的目录
    }).extend({ //设定模块别名
        upload1: 'upload1' //如果test.js是在根目录，也可以不用设定别名
//        ,test1: 'admin/test1' //相对于上述base目录的子目录
    });

    //使用test
    layui.use('upload1', function(){
        var upload1 = layui.upload1;

        //单个图片上传需要的对象
        var uploadoption1={
            "choosebtn":"selectfiles1",// 选择文件按钮id
            "uploadbtn":"postfiles1",//确定上传按钮id
            "container":"container11",//选择和确实上传按钮的父节点id
            "ossfile":"ossfile",//图片存放位置区域id
            "g_dirname":"ceshi/",//如果不填，默认是上传到根目录, 注意目录要带/结尾
            "g_object_name_type":"local_name",//local_name:上传文件名字保持本地文件名字,random_name:上传文件名字是随机文件名
            "type":"head"//head头像模式显示为头像,img图片格式可以是多个图片是个图片列表,file文件格式一个个文件列表带进度条显示
        };
        var uploader1=upload1.createUploader(uploadoption1);
        uploader1.init();
        //文件上传需要的对象
        var uploadoption2={
            "choosebtn":"selectfiles2",// 选择文件按钮id
            "uploadbtn":"postfiles2",//确定上传按钮id
            "container":"container12",//选择和确实上传按钮的父节点id
            "ossfile":"ossfile2",//图片存放位置区域id
            "g_dirname":"ceshi/",//如果不填，默认是上传到根目录, 注意目录要带/结尾
            "g_object_name_type":"local_name",//local_name:上传文件名字保持本地文件名字,random_name:上传文件名字是随机文件名
            "type":"file"//head头像模式显示为头像,img图片格式可以是多个图片是个图片列表,file文件格式一个个文件列表带进度条显示
        };
        var uploader2=upload1.createUploader(uploadoption2);
        uploader2.init();
    });

</script>
</body>
</html>